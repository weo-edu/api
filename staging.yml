#
#     Staging Stack
#

#
# WEO Frontend Load Balancer
#
weo-lb:
  image: 'tutum/haproxy:0.1'
  tags:
    - staging
  links:
    - weo
  ports:
    - '80:80'
    - '443:443'
  roles:
    - global
  environment:
    BACKEND_PORT: 3000
    SSL_CERT: -----BEGIN CERTIFICATE-----\nMIIFQDCCBCigAwIBAgIRALeL7/fPFwpVytizjYXJvqcwDQYJKoZIhvcNAQELBQAw\ngZAxCzAJBgNVBAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAO\nBgNVBAcTB1NhbGZvcmQxGjAYBgNVBAoTEUNPTU9ETyBDQSBMaW1pdGVkMTYwNAYD\nVQQDEy1DT01PRE8gUlNBIERvbWFpbiBWYWxpZGF0aW9uIFNlY3VyZSBTZXJ2ZXIg\nQ0EwHhcNMTYwOTE0MDAwMDAwWhcNMTcwOTE0MjM1OTU5WjBVMSEwHwYDVQQLExhE\nb21haW4gQ29udHJvbCBWYWxpZGF0ZWQxHTAbBgNVBAsTFFBvc2l0aXZlU1NMIFdp\nbGRjYXJkMREwDwYDVQQDDAgqLndlby5pbzCCASIwDQYJKoZIhvcNAQEBBQADggEP\nADCCAQoCggEBAKJq2krFBotZpfNbEytJ8z115eRDvxYe3kkMC/0x25Liw8L/xM0b\nXumewT8uZNwyQbGg4N1QpHY2i4hnTjeYzS94aFHT1lLtWut9E3/fdC14tNsscMyv\n1znHrOEd71YgbPML+bUyNoxeSK2bphR6vywgFA9YANiaHU+KuVxhArWQzAV9pL6t\nW9zvTZ5wJ+bG08VYHQqRhnOyoXpdWPlDzjYlpnRqsSw/cTx0dfsJ8fmIIiGhaEUd\nKQ/RuuMi5GYR4yS3txBjTni7uCrLtnb53drDAm0+uu3C3NUcwaNz1F6VEvtDfKRs\n4QkUQztTK0zDroTmGm9y7IAi9Ei4eAHlEgECAwEAAaOCAc0wggHJMB8GA1UdIwQY\nMBaAFJCvajqUWgvYkOoSVnPfQ7Q6KNrnMB0GA1UdDgQWBBSq6B/mR6+MHAAqTU3j\njJ9IIk8FkDAOBgNVHQ8BAf8EBAMCBaAwDAYDVR0TAQH/BAIwADAdBgNVHSUEFjAU\nBggrBgEFBQcDAQYIKwYBBQUHAwIwTwYDVR0gBEgwRjA6BgsrBgEEAbIxAQICBzAr\nMCkGCCsGAQUFBwIBFh1odHRwczovL3NlY3VyZS5jb21vZG8uY29tL0NQUzAIBgZn\ngQwBAgEwVAYDVR0fBE0wSzBJoEegRYZDaHR0cDovL2NybC5jb21vZG9jYS5jb20v\nQ09NT0RPUlNBRG9tYWluVmFsaWRhdGlvblNlY3VyZVNlcnZlckNBLmNybDCBhQYI\nKwYBBQUHAQEEeTB3ME8GCCsGAQUFBzAChkNodHRwOi8vY3J0LmNvbW9kb2NhLmNv\nbS9DT01PRE9SU0FEb21haW5WYWxpZGF0aW9uU2VjdXJlU2VydmVyQ0EuY3J0MCQG\nCCsGAQUFBzABhhhodHRwOi8vb2NzcC5jb21vZG9jYS5jb20wGwYDVR0RBBQwEoII\nKi53ZW8uaW+CBndlby5pbzANBgkqhkiG9w0BAQsFAAOCAQEAGf0onD10uJiCqWFm\nRanQHX4/ezdvehkbget7MCoFyHyVQ/Oyeqfm+ZSw2FFeMhFd5IGsAKf1R9q/n3rV\npDuhZQxMXekqBI7eBUJaf6gu0J6CGNHmDWK/ErkdcJZ8xhCj3cA7sjSVNBodpMa2\nA7QbayhfsqtaoZ0V6CByboBzs+PFuSJieNLKLAppas2zKLhpTknyHu4fRi6ihWl7\nrxwMIIX5Vms+4LdBDBZYYdElMwH8fyfgrZ94NHRIUoBqwE2jGe0liySCnXiLK7wO\n+x35vAnMtO8EHOWttslNeXFQEFqQYLAPEcntLypgpIR7c04Mnhprau0lwYeov/uX\n63ga1g==\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIGCDCCA/CgAwIBAgIQKy5u6tl1NmwUim7bo3yMBzANBgkqhkiG9w0BAQwFADCB\nhTELMAkGA1UEBhMCR0IxGzAZBgNVBAgTEkdyZWF0ZXIgTWFuY2hlc3RlcjEQMA4G\nA1UEBxMHU2FsZm9yZDEaMBgGA1UEChMRQ09NT0RPIENBIExpbWl0ZWQxKzApBgNV\nBAMTIkNPTU9ETyBSU0EgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNMTQwMjEy\nMDAwMDAwWhcNMjkwMjExMjM1OTU5WjCBkDELMAkGA1UEBhMCR0IxGzAZBgNVBAgT\nEkdyZWF0ZXIgTWFuY2hlc3RlcjEQMA4GA1UEBxMHU2FsZm9yZDEaMBgGA1UEChMR\nQ09NT0RPIENBIExpbWl0ZWQxNjA0BgNVBAMTLUNPTU9ETyBSU0EgRG9tYWluIFZh\nbGlkYXRpb24gU2VjdXJlIFNlcnZlciBDQTCCASIwDQYJKoZIhvcNAQEBBQADggEP\nADCCAQoCggEBAI7CAhnhoFmk6zg1jSz9AdDTScBkxwtiBUUWOqigwAwCfx3M28Sh\nbXcDow+G+eMGnD4LgYqbSRutA776S9uMIO3Vzl5ljj4Nr0zCsLdFXlIvNN5IJGS0\nQa4Al/e+Z96e0HqnU4A7fK31llVvl0cKfIWLIpeNs4TgllfQcBhglo/uLQeTnaG6\nytHNe+nEKpooIZFNb5JPJaXyejXdJtxGpdCsWTWM/06RQ1A/WZMebFEh7lgUq/51\nUHg+TLAchhP6a5i84DuUHoVS3AOTJBhuyydRReZw3iVDpA3hSqXttn7IzW3uLh0n\nc13cRTCAquOyQQuvvUSH2rnlG51/ruWFgqUCAwEAAaOCAWUwggFhMB8GA1UdIwQY\nMBaAFLuvfgI9+qbxPISOre44mOzZMjLUMB0GA1UdDgQWBBSQr2o6lFoL2JDqElZz\n30O0Oija5zAOBgNVHQ8BAf8EBAMCAYYwEgYDVR0TAQH/BAgwBgEB/wIBADAdBgNV\nHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwGwYDVR0gBBQwEjAGBgRVHSAAMAgG\nBmeBDAECATBMBgNVHR8ERTBDMEGgP6A9hjtodHRwOi8vY3JsLmNvbW9kb2NhLmNv\nbS9DT01PRE9SU0FDZXJ0aWZpY2F0aW9uQXV0aG9yaXR5LmNybDBxBggrBgEFBQcB\nAQRlMGMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9jcnQuY29tb2RvY2EuY29tL0NPTU9E\nT1JTQUFkZFRydXN0Q0EuY3J0MCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5jb21v\nZG9jYS5jb20wDQYJKoZIhvcNAQEMBQADggIBAE4rdk+SHGI2ibp3wScF9BzWRJ2p\nmj6q1WZmAT7qSeaiNbz69t2Vjpk1mA42GHWx3d1Qcnyu3HeIzg/3kCDKo2cuH1Z/\ne+FE6kKVxF0NAVBGFfKBiVlsit2M8RKhjTpCipj4SzR7JzsItG8kO3KdY3RYPBps\nP0/HEZrIqPW1N+8QRcZs2eBelSaz662jue5/DJpmNXMyYE7l3YphLG5SEXdoltMY\ndVEVABt0iN3hxzgEQyjpFv3ZBdRdRydg1vs4O2xyopT4Qhrf7W8GjEXCBgCq5Ojc\n2bXhc3js9iPc0d1sjhqPpepUfJa3w/5Vjo1JXvxku88+vZbrac2/4EjxYoIQ5QxG\nV/Iz2tDIY+3GH5QFlkoakdH368+PUq4NCNk+qKBR6cGHdNXJ93SrLlP7u3r7l+L4\nHyaPs9Kg4DdbKDsx5Q5XLVq4rXmsXiBmGqW5prU5wfWYQ//u+aen/e7KJD2AFsQX\nj4rBYKEMrltDR5FL1ZoXX/nUh8HCjLfn4g8wGTeGrODcQgPmlKidrv0PJFGUzpII\n0fxQ8ANAe4hZ7Q7drNJ3gjTcBpUC2JD5Leo31Rpg0Gcg19hCC0Wvgmje3WYkN5Ap\nlBlGGSW4gNfL1IYoakRwJiNiqZ+Gb7+6kHDSVneFeO/qJakXzlByjAA6quPbYzSf\n+AZxAeKCINT+b72x\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFdDCCBFygAwIBAgIQJ2buVutJ846r13Ci/ITeIjANBgkqhkiG9w0BAQwFADBv\nMQswCQYDVQQGEwJTRTEUMBIGA1UEChMLQWRkVHJ1c3QgQUIxJjAkBgNVBAsTHUFk\nZFRydXN0IEV4dGVybmFsIFRUUCBOZXR3b3JrMSIwIAYDVQQDExlBZGRUcnVzdCBF\neHRlcm5hbCBDQSBSb290MB4XDTAwMDUzMDEwNDgzOFoXDTIwMDUzMDEwNDgzOFow\ngYUxCzAJBgNVBAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAO\nBgNVBAcTB1NhbGZvcmQxGjAYBgNVBAoTEUNPTU9ETyBDQSBMaW1pdGVkMSswKQYD\nVQQDEyJDT01PRE8gUlNBIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MIICIjANBgkq\nhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAkehUktIKVrGsDSTdxc9EZ3SZKzejfSNw\nAHG8U9/E+ioSj0t/EFa9n3Byt2F/yUsPF6c947AEYe7/EZfH9IY+Cvo+XPmT5jR6\n2RRr55yzhaCCenavcZDX7P0N+pxs+t+wgvQUfvm+xKYvT3+Zf7X8Z0NyvQwA1onr\nayzT7Y+YHBSrfuXjbvzYqOSSJNpDa2K4Vf3qwbxstovzDo2a5JtsaZn4eEgwRdWt\n4Q08RWD8MpZRJ7xnw8outmvqRsfHIKCxH2XeSAi6pE6p8oNGN4Tr6MyBSENnTnIq\nm1y9TBsoilwie7SrmNnu4FGDwwlGTm0+mfqVF9p8M1dBPI1R7Qu2XK8sYxrfV8g/\nvOldxJuvRZnio1oktLqpVj3Pb6r/SVi+8Kj/9Lit6Tf7urj0Czr56ENCHonYhMsT\n8dm74YlguIwoVqwUHZwK53Hrzw7dPamWoUi9PPevtQ0iTMARgexWO/bTouJbt7IE\nIlKVgJNp6I5MZfGRAy1wdALqi2cVKWlSArvX31BqVUa/oKMoYX9w0MOiqiwhqkfO\nKJwGRXa/ghgntNWutMtQ5mv0TIZxMOmm3xaG4Nj/QN370EKIf6MzOi5cHkERgWPO\nGHFrK+ymircxXDpqR+DDeVnWIBqv8mqYqnK8V0rSS527EPywTEHl7R09XiidnMy/\ns1Hap0flhFMCAwEAAaOB9DCB8TAfBgNVHSMEGDAWgBStvZh6NLQm9/rEJlTvA73g\nJMtUGjAdBgNVHQ4EFgQUu69+Aj36pvE8hI6t7jiY7NkyMtQwDgYDVR0PAQH/BAQD\nAgGGMA8GA1UdEwEB/wQFMAMBAf8wEQYDVR0gBAowCDAGBgRVHSAAMEQGA1UdHwQ9\nMDswOaA3oDWGM2h0dHA6Ly9jcmwudXNlcnRydXN0LmNvbS9BZGRUcnVzdEV4dGVy\nbmFsQ0FSb290LmNybDA1BggrBgEFBQcBAQQpMCcwJQYIKwYBBQUHMAGGGWh0dHA6\nLy9vY3NwLnVzZXJ0cnVzdC5jb20wDQYJKoZIhvcNAQEMBQADggEBAGS/g/FfmoXQ\nzbihKVcN6Fr30ek+8nYEbvFScLsePP9NDXRqzIGCJdPDoCpdTPW6i6FtxFQJdcfj\nJw5dhHk3QBN39bSsHNA7qxcS1u80GH4r6XnTq1dFDK8o+tDb5VCViLvfhVdpfZLY\nUspzgb8c8+a4bmYRBbMelC1/kZWSWfFMzqORcUx8Rww7Cxn2obFshj5cqsQugsv5\nB5a6SE2Q8pTIqXOi6wZ7I53eovNNVZ96YUWYGGjHXkBrI/V5eu+MtWuLt29G9Hvx\nPUsE2JOAWVrgQSQdso8VYFhH2+9uRv0V9dlfmrPb2LjkQLPNlzmuhbsdjrzch5vR\npu/xO28QOG8=\n-----END CERTIFICATE-----\n-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAomraSsUGi1ml81sTK0nzPXXl5EO/Fh7eSQwL/THbkuLDwv/E\nzRte6Z7BPy5k3DJBsaDg3VCkdjaLiGdON5jNL3hoUdPWUu1a630Tf990LXi02yxw\nzK/XOces4R3vViBs8wv5tTI2jF5IrZumFHq/LCAUD1gA2JodT4q5XGECtZDMBX2k\nvq1b3O9NnnAn5sbTxVgdCpGGc7Khel1Y+UPONiWmdGqxLD9xPHR1+wnx+YgiIaFo\nRR0pD9G64yLkZhHjJLe3EGNOeLu4Ksu2dvnd2sMCbT667cLc1RzBo3PUXpUS+0N8\npGzhCRRDO1MrTMOuhOYab3LsgCL0SLh4AeUSAQIDAQABAoIBAQCJtY2Wnc15s644\nUz1Ck/XwY5ljXGmViOCyEMvNh0uEFE8ldBVaTt2/uYJiXqTX6qi2whBGtgxryr2u\nDuFL1HwMxsu0radoMqXHSwqQflcUAuddeiW9903GSN31FZuLa/zUao/zqTqE86At\nyu4bKSQUdrJrfBNjk/BMM/QMNpjEdkIjr93lC6O0jUV2hoA6H/mvGl02BNDUiXBd\nhA2B7pSM7LPohBs+sJzhu+/pJosApiBspOWojGKXnj3xnPhfG9nDzOSjwBcSTWsW\ntRBTP+7IA7I4lek0EALd4wK/aGyOuSqgQ5+PqyBj1RQitFUoslvezbo7i6XjRFQF\nmfzy6+3tAoGBAM8KwZ8CrR9pVkXGhRu3GzeB1qvk6u2uUWWSRWdAYqFLptixwUuV\nqY2FjNy4yEkpOrtjl0yAhQVSRyJfSjDufvK9nnGSpAD5HPNnawZ6c6S/ictwsoF7\nyRCdK2WCOzew19gzz55MK3qxhxU8HznLYlSooLwrk7eUzaFc+ZTDsvnrAoGBAMjS\nwSNeCaPpRWv7tLVlTNNo5EHV44aUrD8YS5DtmQD3jh5MwzmdZ5OpJ0nF4Lnzdnff\nVngMuzZilvoX0O8CHJDrKVIE+Fa+OSBEkpAv5qTWfkmHUht/389HMCfaBLRc4v8h\nMAahzvg17CZKUGk1061OpJKgquyFFVqKkIGF8RzDAoGAJeaFLTOTN4XT6i/+G+W4\nEMAu6QadzuazNdHB7LXHmFk98LsRdGGwSRzifWFCIMpwWu9POgzozOGT7gHdlfmC\nubLmd0ntxdPUbeZHnEb8NnNtqRU3SCa91tG+qPVfG8G+sXBCmGq/JtWqscNwv+aw\nWGkKC4g6oUeXIOvhME9mywMCgYA0/+oY+2hv6dB4fyVh+iocYUJcXaZ+jh4nSLIo\nvYvzxWGsfXXIbtI3Fh1YSvDUInzRhg+7/yApajuOJVruuQ/w7x8olkc0HV/WNEK5\n6upj9ne90AjLWSQoABGlctRrBVijHI8gMPP+bby1Hke6fIow4uBsEhsJ8NWB36/j\nfwXzIQKBgC9MrS4PJLOtIt4o9LKqgFuGOkIzhh373+cg4aFphVvgrMLpWmUptbxh\nNTYHHnCdhX3Z1vMZaogigfwNtRt7R1C9AhmnQChV4W/V87Bhjj6RqwUK0djIAM4p\ns/wqsTYh8RQ0BrvkvlrSOEdNheXBPZ7ARvqN7/I8aa4iB5GR7MsU\n-----END RSA PRIVATE KEY-----\n

#
# WEO Frontend Server
#
weo:
  image: 'weoedu/weo:staging'
  tags:
    - staging
  autoredeploy: true
  expose:
    - '3000'
  environment:
    PORT: 3000
    API_SERVER: //staging-api.weo.io
    API_STATIC: //staging-api.weo.io
    AVATAR_SERVER: //staging-avatars.global.ssl.fastly.net
    CLEVER_CLIENT_ID: 9e85d73ee95c90414fbd
    FACEBOOK_APP_ID: 1696938930540934
    CRAWLABLE: false
    DEBUG: weo:*
    GOOGLE_CLIENT_ID: 696300823052-39m3901cceuiehfiac4s9l9su5tlps2r.apps.googleusercontent.com
    INTERCOM_APP_ID: so9uchl4
    NODE_ENV: staging
    PAPERTRAIL_HOST: logs2.papertrailapp.com
    PAPERTRAIL_PORT: 15920
    SEGMENT_IO_KEY: e6e7s7djli
    STATIC_FILES: //staging.weo.io
    IMAGE_SERVER: //images.global.ssl.fastly.net
    WEO_SOURCEMAPS: true
    WEO_ENGAGE: "Get early access"
    OFFICE365_CLIENT_ID: f2a70124-f015-4cd1-b80b-7e80cb022d16

#
# API Backend Load Balancer
#
api-lb:
  image: 'tutum/haproxy:0.1'
  tags:
    - staging
  links:
    - api
  ports:
    - '80:80'
    - '443:443'
  roles:
    - global
  environment:
    BACKEND_PORT: 3000
    SSL_CERT: -----BEGIN CERTIFICATE-----\nMIIFQDCCBCigAwIBAgIRALeL7/fPFwpVytizjYXJvqcwDQYJKoZIhvcNAQELBQAw\ngZAxCzAJBgNVBAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAO\nBgNVBAcTB1NhbGZvcmQxGjAYBgNVBAoTEUNPTU9ETyBDQSBMaW1pdGVkMTYwNAYD\nVQQDEy1DT01PRE8gUlNBIERvbWFpbiBWYWxpZGF0aW9uIFNlY3VyZSBTZXJ2ZXIg\nQ0EwHhcNMTYwOTE0MDAwMDAwWhcNMTcwOTE0MjM1OTU5WjBVMSEwHwYDVQQLExhE\nb21haW4gQ29udHJvbCBWYWxpZGF0ZWQxHTAbBgNVBAsTFFBvc2l0aXZlU1NMIFdp\nbGRjYXJkMREwDwYDVQQDDAgqLndlby5pbzCCASIwDQYJKoZIhvcNAQEBBQADggEP\nADCCAQoCggEBAKJq2krFBotZpfNbEytJ8z115eRDvxYe3kkMC/0x25Liw8L/xM0b\nXumewT8uZNwyQbGg4N1QpHY2i4hnTjeYzS94aFHT1lLtWut9E3/fdC14tNsscMyv\n1znHrOEd71YgbPML+bUyNoxeSK2bphR6vywgFA9YANiaHU+KuVxhArWQzAV9pL6t\nW9zvTZ5wJ+bG08VYHQqRhnOyoXpdWPlDzjYlpnRqsSw/cTx0dfsJ8fmIIiGhaEUd\nKQ/RuuMi5GYR4yS3txBjTni7uCrLtnb53drDAm0+uu3C3NUcwaNz1F6VEvtDfKRs\n4QkUQztTK0zDroTmGm9y7IAi9Ei4eAHlEgECAwEAAaOCAc0wggHJMB8GA1UdIwQY\nMBaAFJCvajqUWgvYkOoSVnPfQ7Q6KNrnMB0GA1UdDgQWBBSq6B/mR6+MHAAqTU3j\njJ9IIk8FkDAOBgNVHQ8BAf8EBAMCBaAwDAYDVR0TAQH/BAIwADAdBgNVHSUEFjAU\nBggrBgEFBQcDAQYIKwYBBQUHAwIwTwYDVR0gBEgwRjA6BgsrBgEEAbIxAQICBzAr\nMCkGCCsGAQUFBwIBFh1odHRwczovL3NlY3VyZS5jb21vZG8uY29tL0NQUzAIBgZn\ngQwBAgEwVAYDVR0fBE0wSzBJoEegRYZDaHR0cDovL2NybC5jb21vZG9jYS5jb20v\nQ09NT0RPUlNBRG9tYWluVmFsaWRhdGlvblNlY3VyZVNlcnZlckNBLmNybDCBhQYI\nKwYBBQUHAQEEeTB3ME8GCCsGAQUFBzAChkNodHRwOi8vY3J0LmNvbW9kb2NhLmNv\nbS9DT01PRE9SU0FEb21haW5WYWxpZGF0aW9uU2VjdXJlU2VydmVyQ0EuY3J0MCQG\nCCsGAQUFBzABhhhodHRwOi8vb2NzcC5jb21vZG9jYS5jb20wGwYDVR0RBBQwEoII\nKi53ZW8uaW+CBndlby5pbzANBgkqhkiG9w0BAQsFAAOCAQEAGf0onD10uJiCqWFm\nRanQHX4/ezdvehkbget7MCoFyHyVQ/Oyeqfm+ZSw2FFeMhFd5IGsAKf1R9q/n3rV\npDuhZQxMXekqBI7eBUJaf6gu0J6CGNHmDWK/ErkdcJZ8xhCj3cA7sjSVNBodpMa2\nA7QbayhfsqtaoZ0V6CByboBzs+PFuSJieNLKLAppas2zKLhpTknyHu4fRi6ihWl7\nrxwMIIX5Vms+4LdBDBZYYdElMwH8fyfgrZ94NHRIUoBqwE2jGe0liySCnXiLK7wO\n+x35vAnMtO8EHOWttslNeXFQEFqQYLAPEcntLypgpIR7c04Mnhprau0lwYeov/uX\n63ga1g==\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIGCDCCA/CgAwIBAgIQKy5u6tl1NmwUim7bo3yMBzANBgkqhkiG9w0BAQwFADCB\nhTELMAkGA1UEBhMCR0IxGzAZBgNVBAgTEkdyZWF0ZXIgTWFuY2hlc3RlcjEQMA4G\nA1UEBxMHU2FsZm9yZDEaMBgGA1UEChMRQ09NT0RPIENBIExpbWl0ZWQxKzApBgNV\nBAMTIkNPTU9ETyBSU0EgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNMTQwMjEy\nMDAwMDAwWhcNMjkwMjExMjM1OTU5WjCBkDELMAkGA1UEBhMCR0IxGzAZBgNVBAgT\nEkdyZWF0ZXIgTWFuY2hlc3RlcjEQMA4GA1UEBxMHU2FsZm9yZDEaMBgGA1UEChMR\nQ09NT0RPIENBIExpbWl0ZWQxNjA0BgNVBAMTLUNPTU9ETyBSU0EgRG9tYWluIFZh\nbGlkYXRpb24gU2VjdXJlIFNlcnZlciBDQTCCASIwDQYJKoZIhvcNAQEBBQADggEP\nADCCAQoCggEBAI7CAhnhoFmk6zg1jSz9AdDTScBkxwtiBUUWOqigwAwCfx3M28Sh\nbXcDow+G+eMGnD4LgYqbSRutA776S9uMIO3Vzl5ljj4Nr0zCsLdFXlIvNN5IJGS0\nQa4Al/e+Z96e0HqnU4A7fK31llVvl0cKfIWLIpeNs4TgllfQcBhglo/uLQeTnaG6\nytHNe+nEKpooIZFNb5JPJaXyejXdJtxGpdCsWTWM/06RQ1A/WZMebFEh7lgUq/51\nUHg+TLAchhP6a5i84DuUHoVS3AOTJBhuyydRReZw3iVDpA3hSqXttn7IzW3uLh0n\nc13cRTCAquOyQQuvvUSH2rnlG51/ruWFgqUCAwEAAaOCAWUwggFhMB8GA1UdIwQY\nMBaAFLuvfgI9+qbxPISOre44mOzZMjLUMB0GA1UdDgQWBBSQr2o6lFoL2JDqElZz\n30O0Oija5zAOBgNVHQ8BAf8EBAMCAYYwEgYDVR0TAQH/BAgwBgEB/wIBADAdBgNV\nHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwGwYDVR0gBBQwEjAGBgRVHSAAMAgG\nBmeBDAECATBMBgNVHR8ERTBDMEGgP6A9hjtodHRwOi8vY3JsLmNvbW9kb2NhLmNv\nbS9DT01PRE9SU0FDZXJ0aWZpY2F0aW9uQXV0aG9yaXR5LmNybDBxBggrBgEFBQcB\nAQRlMGMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9jcnQuY29tb2RvY2EuY29tL0NPTU9E\nT1JTQUFkZFRydXN0Q0EuY3J0MCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5jb21v\nZG9jYS5jb20wDQYJKoZIhvcNAQEMBQADggIBAE4rdk+SHGI2ibp3wScF9BzWRJ2p\nmj6q1WZmAT7qSeaiNbz69t2Vjpk1mA42GHWx3d1Qcnyu3HeIzg/3kCDKo2cuH1Z/\ne+FE6kKVxF0NAVBGFfKBiVlsit2M8RKhjTpCipj4SzR7JzsItG8kO3KdY3RYPBps\nP0/HEZrIqPW1N+8QRcZs2eBelSaz662jue5/DJpmNXMyYE7l3YphLG5SEXdoltMY\ndVEVABt0iN3hxzgEQyjpFv3ZBdRdRydg1vs4O2xyopT4Qhrf7W8GjEXCBgCq5Ojc\n2bXhc3js9iPc0d1sjhqPpepUfJa3w/5Vjo1JXvxku88+vZbrac2/4EjxYoIQ5QxG\nV/Iz2tDIY+3GH5QFlkoakdH368+PUq4NCNk+qKBR6cGHdNXJ93SrLlP7u3r7l+L4\nHyaPs9Kg4DdbKDsx5Q5XLVq4rXmsXiBmGqW5prU5wfWYQ//u+aen/e7KJD2AFsQX\nj4rBYKEMrltDR5FL1ZoXX/nUh8HCjLfn4g8wGTeGrODcQgPmlKidrv0PJFGUzpII\n0fxQ8ANAe4hZ7Q7drNJ3gjTcBpUC2JD5Leo31Rpg0Gcg19hCC0Wvgmje3WYkN5Ap\nlBlGGSW4gNfL1IYoakRwJiNiqZ+Gb7+6kHDSVneFeO/qJakXzlByjAA6quPbYzSf\n+AZxAeKCINT+b72x\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFdDCCBFygAwIBAgIQJ2buVutJ846r13Ci/ITeIjANBgkqhkiG9w0BAQwFADBv\nMQswCQYDVQQGEwJTRTEUMBIGA1UEChMLQWRkVHJ1c3QgQUIxJjAkBgNVBAsTHUFk\nZFRydXN0IEV4dGVybmFsIFRUUCBOZXR3b3JrMSIwIAYDVQQDExlBZGRUcnVzdCBF\neHRlcm5hbCBDQSBSb290MB4XDTAwMDUzMDEwNDgzOFoXDTIwMDUzMDEwNDgzOFow\ngYUxCzAJBgNVBAYTAkdCMRswGQYDVQQIExJHcmVhdGVyIE1hbmNoZXN0ZXIxEDAO\nBgNVBAcTB1NhbGZvcmQxGjAYBgNVBAoTEUNPTU9ETyBDQSBMaW1pdGVkMSswKQYD\nVQQDEyJDT01PRE8gUlNBIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MIICIjANBgkq\nhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAkehUktIKVrGsDSTdxc9EZ3SZKzejfSNw\nAHG8U9/E+ioSj0t/EFa9n3Byt2F/yUsPF6c947AEYe7/EZfH9IY+Cvo+XPmT5jR6\n2RRr55yzhaCCenavcZDX7P0N+pxs+t+wgvQUfvm+xKYvT3+Zf7X8Z0NyvQwA1onr\nayzT7Y+YHBSrfuXjbvzYqOSSJNpDa2K4Vf3qwbxstovzDo2a5JtsaZn4eEgwRdWt\n4Q08RWD8MpZRJ7xnw8outmvqRsfHIKCxH2XeSAi6pE6p8oNGN4Tr6MyBSENnTnIq\nm1y9TBsoilwie7SrmNnu4FGDwwlGTm0+mfqVF9p8M1dBPI1R7Qu2XK8sYxrfV8g/\nvOldxJuvRZnio1oktLqpVj3Pb6r/SVi+8Kj/9Lit6Tf7urj0Czr56ENCHonYhMsT\n8dm74YlguIwoVqwUHZwK53Hrzw7dPamWoUi9PPevtQ0iTMARgexWO/bTouJbt7IE\nIlKVgJNp6I5MZfGRAy1wdALqi2cVKWlSArvX31BqVUa/oKMoYX9w0MOiqiwhqkfO\nKJwGRXa/ghgntNWutMtQ5mv0TIZxMOmm3xaG4Nj/QN370EKIf6MzOi5cHkERgWPO\nGHFrK+ymircxXDpqR+DDeVnWIBqv8mqYqnK8V0rSS527EPywTEHl7R09XiidnMy/\ns1Hap0flhFMCAwEAAaOB9DCB8TAfBgNVHSMEGDAWgBStvZh6NLQm9/rEJlTvA73g\nJMtUGjAdBgNVHQ4EFgQUu69+Aj36pvE8hI6t7jiY7NkyMtQwDgYDVR0PAQH/BAQD\nAgGGMA8GA1UdEwEB/wQFMAMBAf8wEQYDVR0gBAowCDAGBgRVHSAAMEQGA1UdHwQ9\nMDswOaA3oDWGM2h0dHA6Ly9jcmwudXNlcnRydXN0LmNvbS9BZGRUcnVzdEV4dGVy\nbmFsQ0FSb290LmNybDA1BggrBgEFBQcBAQQpMCcwJQYIKwYBBQUHMAGGGWh0dHA6\nLy9vY3NwLnVzZXJ0cnVzdC5jb20wDQYJKoZIhvcNAQEMBQADggEBAGS/g/FfmoXQ\nzbihKVcN6Fr30ek+8nYEbvFScLsePP9NDXRqzIGCJdPDoCpdTPW6i6FtxFQJdcfj\nJw5dhHk3QBN39bSsHNA7qxcS1u80GH4r6XnTq1dFDK8o+tDb5VCViLvfhVdpfZLY\nUspzgb8c8+a4bmYRBbMelC1/kZWSWfFMzqORcUx8Rww7Cxn2obFshj5cqsQugsv5\nB5a6SE2Q8pTIqXOi6wZ7I53eovNNVZ96YUWYGGjHXkBrI/V5eu+MtWuLt29G9Hvx\nPUsE2JOAWVrgQSQdso8VYFhH2+9uRv0V9dlfmrPb2LjkQLPNlzmuhbsdjrzch5vR\npu/xO28QOG8=\n-----END CERTIFICATE-----\n-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAomraSsUGi1ml81sTK0nzPXXl5EO/Fh7eSQwL/THbkuLDwv/E\nzRte6Z7BPy5k3DJBsaDg3VCkdjaLiGdON5jNL3hoUdPWUu1a630Tf990LXi02yxw\nzK/XOces4R3vViBs8wv5tTI2jF5IrZumFHq/LCAUD1gA2JodT4q5XGECtZDMBX2k\nvq1b3O9NnnAn5sbTxVgdCpGGc7Khel1Y+UPONiWmdGqxLD9xPHR1+wnx+YgiIaFo\nRR0pD9G64yLkZhHjJLe3EGNOeLu4Ksu2dvnd2sMCbT667cLc1RzBo3PUXpUS+0N8\npGzhCRRDO1MrTMOuhOYab3LsgCL0SLh4AeUSAQIDAQABAoIBAQCJtY2Wnc15s644\nUz1Ck/XwY5ljXGmViOCyEMvNh0uEFE8ldBVaTt2/uYJiXqTX6qi2whBGtgxryr2u\nDuFL1HwMxsu0radoMqXHSwqQflcUAuddeiW9903GSN31FZuLa/zUao/zqTqE86At\nyu4bKSQUdrJrfBNjk/BMM/QMNpjEdkIjr93lC6O0jUV2hoA6H/mvGl02BNDUiXBd\nhA2B7pSM7LPohBs+sJzhu+/pJosApiBspOWojGKXnj3xnPhfG9nDzOSjwBcSTWsW\ntRBTP+7IA7I4lek0EALd4wK/aGyOuSqgQ5+PqyBj1RQitFUoslvezbo7i6XjRFQF\nmfzy6+3tAoGBAM8KwZ8CrR9pVkXGhRu3GzeB1qvk6u2uUWWSRWdAYqFLptixwUuV\nqY2FjNy4yEkpOrtjl0yAhQVSRyJfSjDufvK9nnGSpAD5HPNnawZ6c6S/ictwsoF7\nyRCdK2WCOzew19gzz55MK3qxhxU8HznLYlSooLwrk7eUzaFc+ZTDsvnrAoGBAMjS\nwSNeCaPpRWv7tLVlTNNo5EHV44aUrD8YS5DtmQD3jh5MwzmdZ5OpJ0nF4Lnzdnff\nVngMuzZilvoX0O8CHJDrKVIE+Fa+OSBEkpAv5qTWfkmHUht/389HMCfaBLRc4v8h\nMAahzvg17CZKUGk1061OpJKgquyFFVqKkIGF8RzDAoGAJeaFLTOTN4XT6i/+G+W4\nEMAu6QadzuazNdHB7LXHmFk98LsRdGGwSRzifWFCIMpwWu9POgzozOGT7gHdlfmC\nubLmd0ntxdPUbeZHnEb8NnNtqRU3SCa91tG+qPVfG8G+sXBCmGq/JtWqscNwv+aw\nWGkKC4g6oUeXIOvhME9mywMCgYA0/+oY+2hv6dB4fyVh+iocYUJcXaZ+jh4nSLIo\nvYvzxWGsfXXIbtI3Fh1YSvDUInzRhg+7/yApajuOJVruuQ/w7x8olkc0HV/WNEK5\n6upj9ne90AjLWSQoABGlctRrBVijHI8gMPP+bby1Hke6fIow4uBsEhsJ8NWB36/j\nfwXzIQKBgC9MrS4PJLOtIt4o9LKqgFuGOkIzhh373+cg4aFphVvgrMLpWmUptbxh\nNTYHHnCdhX3Z1vMZaogigfwNtRt7R1C9AhmnQChV4W/V87Bhjj6RqwUK0djIAM4p\ns/wqsTYh8RQ0BrvkvlrSOEdNheXBPZ7ARvqN7/I8aa4iB5GR7MsU\n-----END RSA PRIVATE KEY-----\n
    SESSION_COOKIE: io  # use socket.io's io session cookie for
                        # session persistence

#
# API Backend Server
#
api:
  image: 'weoedu/api:staging'
  tags:
    - staging
  autoredeploy: true
  target_num_containers: 3
  links:
    - redis # We don't actually use the link or the env vars to connnect to
            # redis, but we need to put the link here to ensure redis boots up
            # before the API
  expose:
    - '3000'
  environment:
    PORT: 3000
    APP_NAME: eos-api-staging
    CLEVER_CLIENT_ID: 9e85d73ee95c90414fbd
    CLEVER_CLIENT_SECRET: de3a5c71719741581ec2b77a05e07c643369560f
    DEBUG: weo:*
    EMAIL_FRONTEND: http://staging.weo.io
    EMAIL_PASS: themangthemang
    EMAIL_USER: testmail@weo.io
    MANDRILL_API_KEY: GAs1A7BXpHBZM5Rl2FLcig
    MAILCHIMP_API_KEY: 8a86dfde003377d5b2e32668c99369ce
    MAILCHIMP_DATACENTER: us11
    MAILCHIMP_INVITE_LIST_ID: 4c10c5f1a7
    GOOGLE_CLIENT_ID: 696300823052-39m3901cceuiehfiac4s9l9su5tlps2r.apps.googleusercontent.com
    GOOGLE_SECRET: Ou2xuWLoVp_JP23p0rNMnaC9
    MONGO_URL: mongodb://eos:UGjJdj4fHjX5Qkq@lighthouse.0.mongolayer.com:10253,lighthouse.1.mongolayer.com:10253/default?replicaSet=set-54daa4019bb891b661000eea&autoReconnect=true
    NODE_ENV: staging
    PAPERTRAIL_HOST: logs2.papertrailapp.com
    PAPERTRAIL_PORT: 15920
    REDIS_URL: tcp://user:password@redis.staging.2c4bcbe7.svc.dockerapp.io:6379
    S3_API_KEY: AKIAIIA5OZD3IKVSUXDA
    S3_UPLOAD_REGION: us-west-2
    S3_UPLOAD_BUCKET: weo-uploads-dev
    S3_UPLOAD_SECRET: 5bvPGCODzU/rzfyjq6F0VQN7hkO4AWzqONRkclig
    SCRAPER_URL: http://staging-scraper.weo.io/1/oembed/
    UPLOAD_SIZE_LIMIT: 5mb
    FASTLY_API_KEY: 5fcca7ec8ce5850f169a5589f0cf3a62
    AVATAR_SERVER: //staging-avatars.global.ssl.fastly.net
    WEO_API_FEATURED: 5595a59342d1080b00920bfe,55ca9a978cb0b1100052be67,55b02d80c8a4620e00ef7fe9,54aaff61bf530f0200f351c7
    FACEBOOK_APP_ID: 1696938930540934
    FACEBOOK_SECRET: 35bb8416b0448f1df66c2e1e6a430350
    TEMPLATE_BOARD_ID: 56149fd19c9d5d0c0024ad3c
    SEGMENT_IO_KEY: e6e7s7djli
    JWT_KEY: weodevjwtkey
    KHAN_CONSUMER_KEY: RmFAeWUah2X4HdNY
    KHAN_CONSUMER_SECRET: ezcnXCHTTXp7pnja
    OFFICE365_CLIENT_ID: f2a70124-f015-4cd1-b80b-7e80cb022d16
    OFFICE365_SECRET: 7nMkzuAEkOrKO9h/zK/H4sjGMU+DhTgXpOFSlIkEzpA=


#
# Redis
#
redis:
  image: 'tutum/redis:latest'
  tags:
    - staging
  expose:
    - '6379'
  ports:
    - '6379:6379'
  environment:
    REDIS_PASS: password
